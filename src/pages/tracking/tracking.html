<!--
  Generated template for the TrackingPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar hideBackButton= "true">
    <ion-title>
      SMRT Tracking
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only large (click) = "goNotificationsPage(account)">
        <ion-icon class="notificationIcon"name="mail"></ion-icon>
        <ion-badge class="nav-badge">3</ion-badge>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-card class="account">
    <ion-item class="item">
      <ion-avatar item-start>
        <img [src]="device.account?device.account.avatar?device.account.avatar.url:'':''" />
      </ion-avatar>
     <h2 class="name">
       {{ device.account?device.account.username:"No Name" }}
     </h2>
     <h2 class="model">
       {{ device.model }}
     </h2>
    </ion-item>
  </ion-card>
  <ion-card class="attendance">
    <ion-item class="item">
      <ion-icon name="log-in" item-start large></ion-icon>
      <h2 class="title">
        {{ attendance.checkInStation?
          attendance.checkInStation.name:
          "Not check In" }}
      </h2>
      <h3 class="info">
        {{ attendance.checkInDate?
          attendance.checkInDate:
          "no record" }}
      </h3>
    </ion-item>
    <ion-item class="item">
      <ion-icon name="log-out" item-start large></ion-icon>
      <h2 class="title">
        {{ attendance.checkOutStation?
          attendance.checkOutStation.name:
          "Not check Out" }}
      </h2>
      <h3 class="info">
        {{ attendance.checkOutDate?
          attendance.checkOutDate:
          "no record" }}
      </h3>
    </ion-item>
  </ion-card>
  <ion-card class="tracking">
    <ion-item class="stations">
      <ion-grid>
        <ion-row>
          <ion-col *ngFor="let station of stations">
            <div class="station">
              <station-icon [station]="station"></station-icon>
              <div class="name">
                {{ station.name }}
              </div>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item class="section">
      <h2 class="title">
        Section:
        {{ section.name + (section.remark?" "+section.remark:"") }}
      </h2>
      <h3 class="info">
        {{ device.account?
          device.account.tracking?
          (device.account.tracking.date|dateFormat:'YYYY MMM DD HH:mm:ss'):
          "no record":
          "no record" }}
      </h3>
      <h3 class="info-sm">
        {{ device.account?
          device.account.tracking?
          (formatDate(device.account.tracking.date) + " ago"):
          "no record":
          "no record" }}
      </h3>
    </ion-item>
  </ion-card>
  <ion-fab bottom right mini>
    <button class="logoutButton" ion-fab (click) ="logout()">
      <ion-icon name="arrow-dropleft"></ion-icon>
    </button>
  </ion-fab>
</ion-content>
